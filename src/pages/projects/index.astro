---
/**
 * Ejercicios SQL
 * Route: /proyect
 */
import BaseLayout from '../../layouts/BaseLayout.astro';

const pageTitle = 'Ejercicios SQL — Nandoski666';
---

<BaseLayout>
  <main class="page-container">
    <header class="page-header">
      <h1>{pageTitle}</h1>
      <p class="page-intro">
        Aquí están las dos consultas solicitadas (Ejercicio 1 y Ejercicio 2).
      </p>
    </header>

    <section class="exercise">
      <h2>Ejercicio 1</h2>
      <pre><code>
SELECT E.FIRST_NAME,
       H.EMPLOYEE_ID,
       COUNT(H.JOB_ID) AS job_count
FROM HR.JOB_HISTORY H
JOIN HR.EMPLOYEES E
     ON E.EMPLOYEE_ID = H.EMPLOYEE_ID
GROUP BY E.FIRST_NAME, H.EMPLOYEE_ID
HAVING COUNT(H.JOB_ID) > 1
ORDER BY job_count DESC;
      </code></pre>
    </section>

    <section class="exercise">
      <h2>Ejercicio 2</h2>
      <pre><code>
SELECT  E.EMPLOYEE_ID AS ID_EMPLEADO,
        E.FIRST_NAME || ' ' || E.LAST_NAME AS EMPLEADO,
        LPAD(SUBSTR(E.EMAIL, 1, 3), 9, '*') AS EMAIL_EMPLEADO,
        M.FIRST_NAME || ' ' || M.LAST_NAME AS JEFE,
        LPAD(SUBSTR(M.EMAIL, 1, 3), 9, '*') AS EMAIL_JEFE,
        E.DEPARTMENT_ID AS DEPARTAMENTO,
        E.SALARY AS SALARIO
FROM HR.EMPLOYEES E
LEFT JOIN HR.EMPLOYEES M
       ON E.MANAGER_ID = M.EMPLOYEE_ID
ORDER BY E.DEPARTMENT_ID, E.SALARY DESC;
      </code></pre>
    </section>
  </main>

  <style>
    .page-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 3rem 1.25rem;
    }

    .page-header h1 {
      margin-bottom: 1rem;
    }

    .exercise {
      margin: 2rem 0;
      padding-top: 1rem;
      border-top: 1px solid var(--color-border);
    }

    pre {
      background: #0b0b0b;
      padding: 1rem;
      border-radius: 6px;
      overflow: auto;
    }

    code {
      font-family: monospace;
      font-size: 0.95rem;
    }
  </style>
</BaseLayout>